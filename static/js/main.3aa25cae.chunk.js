(this["webpackJsonpphoto-editor"]=this["webpackJsonpphoto-editor"]||[]).push([[0],{26:function(e,t,a){e.exports=a(51)},31:function(e,t,a){},42:function(e,t){},43:function(e,t){},44:function(e,t){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a.n(c),o=(a(31),a(2)),l=Object(n.createContext)(null),s=a(55),u=a(6),m=a(24),d=function(){var e=Object(n.useContext)(l),t=e.files,a=t.files,c=t.setFiles,i=Object(o.a)(e.error,2)[1],s=Object(m.a)({accept:"image/*",onDrop:function(e){if(a.length+e.length>5)return i("\u041d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 5 \u0444\u0430\u0439\u043b\u043e\u0432");i(null),c([].concat(Object(u.a)(a),Object(u.a)(function(e){return e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}))}(e))))}}),d=s.getRootProps,b=s.getInputProps;return r.a.createElement("div",Object.assign({},d(),{className:"dropzone"}),r.a.createElement("input",b()))},b=function(e){var t=e.id,a=Object(n.useContext)(l).files.removeFile;return r.a.createElement("div",{className:"remove mt--8 ml--16",onClick:function(e){return a(e,t)}})},f=a(54),v=function(e){var t=e.file,a=e.id,c=Object(n.useContext)(l),i=c.files,m=i.files,d=i.setFiles,v=Object(o.a)(c.selectedFileId,2)[1],p=Object(o.a)(c.showEditor,2)[1],O=Object(f.a)({item:{type:"preview",id:a}}),g=Object(o.a)(O,2)[1],E=Object(s.a)({accept:"preview",drop:function(e){var t=e.id;h(t,a)}}),j=Object(o.a)(E,2)[1],h=function(e,t){var a=Object(u.a)(m);a.splice(t,0,a.splice(e,1)[0]),d(a)};return r.a.createElement("div",{className:"preview mr-12 mb-12",id:a,onClick:function(e){v(e.currentTarget.id),p(!0)},ref:function(e){return g(j(e))}},r.a.createElement("div",{className:"preview__thumb"},r.a.createElement("img",{src:t.preview,alt:"",className:"preview__img"})),r.a.createElement(b,{id:a}))},p=a(21),O=a.n(p),g=function(){var e=Object(n.useContext)(l).files,t=e.files,a=e.addFilesToLocalStorage;return r.a.createElement("button",{onClick:a,className:O()("mt-15 send",{send_disabled:!t.length}),disabled:!t.length},"Send")},E=function(){var e=Object(n.useContext)(l),t=e.files.files,a=Object(o.a)(e.error,1)[0],c=Object(s.a)({accept:"preview"}),i=Object(o.a)(c,2)[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mt-15"},r.a.createElement("div",{className:"header__progress"},"STEP 1/3"),r.a.createElement("div",{className:"header__message"},"Drag or select photo")),r.a.createElement("div",{className:"gallery mt-15"},r.a.createElement("div",{className:"gallery__previews",ref:i},t.map((function(e,t){return r.a.createElement(v,{key:t,file:e,id:t})})),r.a.createElement(d,null))),a?r.a.createElement("div",{className:"mt-15 error"},a):null,r.a.createElement(g,null))},j=(a(35),a(22)),h=a.n(j),w=function(e){var t=e.toDataURL();return URL.createObjectURL(function(e){for(var t=atob(e.split(",")[1]),a=new ArrayBuffer(t.length),n=new Uint8Array(a),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return new Blob([a])}(t))},N=function(e){var t=Object(n.useContext)(l),a=t.files,c=a.files,i=a.setFiles,s=Object(o.a)(t.selectedFileId,1)[0],m=Object(o.a)(t.showEditor,2)[1],d=function(e,t){var a=Object(u.a)(c);a[e].preview=t,i(a)};return r.a.createElement("div",{className:"buttonGroup"},r.a.createElement("div",{className:"buttonGroup__container"},r.a.createElement("button",{className:"button-cancel",onClick:function(){return m(!1)}},"Cancel"),r.a.createElement("button",{className:"button-submit",onClick:function(){var t=w(e.editorRef.current.getInstance());d(s,t),m(!1)}},"Done",r.a.createElement("svg",{className:"button-submit__icon",width:"32",height:"27",viewBox:"0 0 32 27",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.37035 26.3342L31.877 3.82753L28.3415 0.291992L9.37042 19.2631L3.72383 13.6165L0.188293 17.152L5.83489 22.7986L5.83481 22.7987L9.37035 26.3342Z",fill:"white"})))))},L=a(47),C=a(48),I=a(49),x={"menu.normalIcon.path":a(50),"menu.activeIcon.path":C,"menu.disabledIcon.path":L,"menu.hoverIcon.path":I},_=function(){var e=Object(n.useContext)(l),t=e.files.files,a=Object(o.a)(e.selectedFileId,1)[0],c=Object(o.a)(e.editorTitle,2),i=c[0],s=c[1],u=t[a].preview,m=t[a].name,d=Object(n.useRef)(null),b={attributes:!0},f=new MutationObserver((function(e){e.forEach((function(e){if("attributes"===e.type)if(e.target.classList.contains("active"))switch(e.target.id.substring(e.target.id.lastIndexOf("-")+1)){case"crop":s("Crop image");break;case"rotate":s("Rotate image");break;case"draw":s("Draw a line")}else s("Crop, rotate or draw")}))}));return Object(n.useEffect)((function(){var e=document.getElementById("tie-btn-crop"),t=document.getElementById("tie-btn-rotate"),a=document.getElementById("tie-btn-draw");return f.observe(e,b),f.observe(t,b),f.observe(a,b),function(){f.disconnect(e,b),f.disconnect(t,b),f.disconnect(a,b)}})),r.a.createElement("div",{className:"editor"},r.a.createElement("div",{className:"editor__header"},i),r.a.createElement(h.a,{ref:d,includeUI:{loadImage:{path:"".concat(u),name:"".concat(m)},theme:x,menu:["crop","rotate","draw"],initMenu:"crop",uiSize:{width:"375px",height:"700px"},menuBarPosition:"bottom"},cssMaxHeight:500,cssMaxWidth:375,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}),r.a.createElement(N,{editorRef:d}))},S=a(53),R=a(23),y=function(){var e=Object(n.useContext)(l),t=Object(o.a)(e.showEditor,1)[0];return r.a.createElement("div",{className:"container"},t?r.a.createElement(_,null):r.a.createElement(S.a,{backend:R.a},r.a.createElement(E,null)))};i.a.render(r.a.createElement((function(e){var t=e.children,a=Object(n.useState)([]),c=Object(o.a)(a,2),i=c[0],s=c[1],u=Object(n.useState)(null),m=Object(o.a)(u,2),d=m[0],b=m[1],f=Object(n.useState)(null),v=Object(o.a)(f,2),p=v[0],O=v[1],g=Object(n.useState)(!1),E=Object(o.a)(g,2),j=E[0],h=E[1],w=Object(n.useState)(null),N=Object(o.a)(w,2),L={selectedFileId:[d,b],error:[p,O],showEditor:[j,h],editorTitle:[N[0],N[1]],files:{files:i,setFiles:s,removeFile:function(e,t){e.stopPropagation(),s(i.filter((function(e,a){return a!==t})))},addFilesToLocalStorage:function(){var e=[];i.forEach((function(t){var a={url:t.path,preview:URL.createObjectURL(t)};e.push(a)})),localStorage.setItem("images",JSON.stringify(e)),console.log("Added to LocalStorage")}}};return r.a.createElement(l.Provider,{value:L},t)}),null,r.a.createElement(y,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.3aa25cae.chunk.js.map